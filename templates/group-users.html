{% extends "base.html" %}
{% block content %}


<div class="container-fluid">
                <div class="row">


                    <div class="col-md-12">
                         <form id="userform" action="/hostsinfo/add_groupusers/" method="post" autocomplete="off">
                        <div class="card">
                            <div class="card-header bg-light">
                                主机组：{{group.group_name}}&nbsp;用户列表
                            </div>

                            <div class="card-body">
                                 <div class="table-responsive">
                                    <table class="table table-striped">
                                        <thead>
                                        <tr>
                                            <th>用户名</th>
                                            <th>用户组</th>
                                            <th>用户登陆密码</th>
                                            <th>操作</th>
                                        </tr>
                                        </thead>
                                        <tbody>
                                        {% for user in users %}
                                        <tr>
                                            <td id="username">{{user.username}}</td>
                                            <td class="text-nowrap">{{user.usergroup}}</td>
                                            <td></td>

                                             <td>
                                                  {% ifnotequal request.user.role 2%}

                                                 <a href="/hostsinfo/addhost_users/" onclick=change_text("{{user.id}}") >
                                                     <i class="icon icon-pencil"></i> 修改
                                                 </a>
                                                 <a href="/hostsinfo/del_groupusers/{{user.username}}/{{group.id}}" onclick="return sumbit_sure()">
                                                     <i class="icon icon-magnifier-remove"></i> 删除
                                                 </a>
                                                  {% endifnotequal %}
                                            </td>
                                        </tr>
                                        {% endfor %}
                                        <tr>
                                            <td> <input class="form-control" name="username" value=""></td>
                                            <td class="text-nowrap"><input class="form-control" name="usergroup" value=""></td>
                                            <td><input class="form-control" type="password" name="password" value=""></td>

                                             <td>
                                                 <input name="groupid" type="hidden" value="{{group.id}}">
                                                <button type="submit" class="btn btn-primary"> 新增 </button>
                                            </td>
                                        </tr>
                                              </tbody>
                                        </table>


                                </div>



                        </div>
                                {% csrf_token %}
                        </div></form>
                    </div>
                </div>
            </div>
{% endblock %}

{% block custom_js %}

<script language="javascript">

function sumbit_sure(){
var gnl=confirm("确定删除用户？该用户将从主机组中所有主机的可登陆用户列表中删除");
if (gnl==true){
return true;
}else{
return false;
}
}

function change_text(user_id){
    var user_id = user_id;
    alert(user_id);
    return false;
}



</script>


{% endblock %}